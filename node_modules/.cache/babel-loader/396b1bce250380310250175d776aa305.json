{"ast":null,"code":"var _jsxFileName = \"/Users/pratikgurudatt/Desktop/code/mine/Thesis/Quadruped/Simulator/Quadruped-Simulation-/src/Components/PlotArea/mainPlot.js\";\nimport React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport Plot from \"react-plotly.js\";\nexport const Container = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  background-color: rgba(255, 255, 255, 0.2);\n  border-radius: 5px;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n`;\n\nclass Joint {\n  constructor(link_1, link_2, link_3, theta_1, theta_2, theta_3, link_1_mass, link_2_mass, link_3_mass, name) {\n    this.joint = {\n      theta_1: theta_1,\n      theta_2: theta_2,\n      theta_3: theta_3,\n      link_1: link_1,\n      link_2: link_2,\n      link_3: link_3,\n      name: name,\n      link_1_mass: link_1_mass,\n      link_2_mass: link_2_mass,\n      link_3_mass: link_3_mass,\n      total_mass: this.link_1_mass + this.link_2_mass + this.link_3_mass\n    };\n  }\n\n  rad2deg(value) {\n    var pi = Math.PI;\n    return value * (180 / pi);\n  }\n\n  deg2rad(degrees) {\n    var pi = Math.PI;\n    return degrees * (pi / 180);\n  }\n\n  printJoint() {\n    console.log(\"Link 1: \" + this.theta_1);\n    console.log(\"link 2: \" + this.theta_2);\n    console.log(\"link 3: \" + this.theta_3);\n  }\n\n}\n\nclass Robot {\n  constructor() {\n    this.bodyRadius = 0;\n  }\n\n  getRobotBody(rads) {\n    //[ -50, 50, 50, -50, -50 ], [ -50, -50, 50, 50, -50 ], [0, 0, 0, 0, 0]\n    let x = [-rads, rads, rads, -rads, -rads];\n    let y = [-rads, -rads, rads, rads, -rads];\n    let z = [0, 0, 0, 0, 0];\n    return {\n      x: x,\n      y: y,\n      z: z\n    };\n  }\n\n  _filterEndPoint(point_set) {\n    return [[point_set[0][0][3], point_set[0][1][3], point_set[0][2][3]], [point_set[1][0][3], point_set[1][1][3], point_set[1][2][3]], [point_set[2][0][3], point_set[2][1][3], point_set[2][2][3]]];\n  }\n\n  _multiplyMatrices(firstArray, secondArray) {\n    let resultingArray = [];\n    let n = 4;\n\n    for (let i = 0; i < n; i++) {\n      resultingArray.push([]);\n\n      for (let j = 0; j < n; j++) {\n        resultingArray[i][j] = 0;\n\n        for (let k = 0; k < n; k++) {\n          resultingArray[i][j] += firstArray[i][k] * secondArray[k][j];\n        }\n      }\n    }\n\n    return resultingArray;\n  }\n\n  getPointFK(joint, point) {\n    let T0_1 = [[Math.cos(joint.theta_1), -Math.sin(joint.theta_1), 0, 0], [Math.sin(joint.theta_1), Math.cos(joint.theta_1), 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]];\n    let T0_2 = [[Math.cos(joint.theta_2), -Math.sin(joint.theta_2), 0, joint.link_1], [0, 0, -1, 0], [Math.sin(joint.theta_2), Math.cos(joint.theta_2), 0, 0], [0, 0, 0, 1]];\n    let T0_3 = [[Math.cos(joint.theta_3), -Math.sin(joint.theta_3), 0, joint.link_2], [Math.sin(joint.theta_3), Math.cos(joint.theta_3), 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]];\n    let T0_4 = [[1, 0, 0, joint.link_3], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]];\n\n    let point_set_1 = this._multiplyMatrices(T0_1, T0_2);\n\n    let point_set_2 = this._multiplyMatrices(point_set_1, T0_3);\n\n    let point_set_3 = this._multiplyMatrices(point_set_2, T0_4);\n\n    let coords = {\n      0: [point_set_1[0][3], point_set_1[1][3], point_set_1[2][3]],\n      1: [point_set_2[0][3], point_set_2[1][3], point_set_2[2][3]],\n      2: [point_set_3[0][3], point_set_3[1][3], point_set_3[2][3]]\n    };\n    return coords[point];\n  }\n\n  getFK(joint) {\n    let T0_1 = [[Math.cos(joint.theta_1), -Math.sin(joint.theta_1), 0, 0], [Math.sin(joint.theta_1), Math.cos(joint.theta_1), 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]];\n    let T0_2 = [[Math.cos(joint.theta_2), -Math.sin(joint.theta_2), 0, joint.link_1], [0, 0, -1, 0], [Math.sin(joint.theta_2), Math.cos(joint.theta_2), 0, 0], [0, 0, 0, 1]];\n    let T0_3 = [[Math.cos(joint.theta_3), -Math.sin(joint.theta_3), 0, joint.link_2], [Math.sin(joint.theta_3), Math.cos(joint.theta_3), 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]];\n    let T0_4 = [[1, 0, 0, joint.link_3], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]];\n\n    let point_set_1 = this._multiplyMatrices(T0_1, T0_2);\n\n    let point_set_2 = this._multiplyMatrices(point_set_1, T0_3);\n\n    let point_set_3 = this._multiplyMatrices(point_set_2, T0_4);\n\n    return this._filterEndPoint([point_set_1, point_set_2, point_set_3]);\n  }\n\n  getIK(x, y, z, joint) {\n    let theta_1 = Math.atan2(y, x);\n    let A = z;\n    let B = Math.cos(theta_1) * x + y * Math.sin(theta_1) - joint.link_1;\n    let C = (Math.pow(A, 2) + Math.pow(B, 2) - Math.pow(joint.link_3, 2) - Math.pow(joint.link_2, 2)) / (2 * joint.link_3 * joint.link_2);\n    let theta_3 = Math.atan2(Math.sqrt(1 - Math.pow(C, 2)), C);\n    let D = Math.cos(theta_3) * joint.link_3 + joint.link_2;\n    let E = Math.sin(theta_3) * joint.link_3;\n    let numerator = (A * D - B * E) / (Math.pow(E, 2) + Math.pow(D, 2));\n    let denominator = 1 - Math.pow(numerator, 2);\n    let theta_2 = Math.atan2(numerator, Math.sqrt(denominator));\n    joint.theta_1 = joint.rad2deg(theta_1);\n    joint.theta_2 = joint.rad2deg(theta_2);\n    joint.theta_3 = joint.rad2deg(theta_3);\n    return joint;\n  }\n\n  getFrame(frameCount, props) {}\n\n}\n\nexport default class PlotArea extends Component {\n  constructor(_props) {\n    super();\n\n    this.preapreJointIK = (leg, joint, prop, length) => {\n      switch (leg) {\n        case 1:\n          {\n            joint.theta_1 = -joint.deg2rad(prop.theta_1);\n            joint.theta_2 = -joint.deg2rad(prop.theta_2);\n            joint.theta_3 = -joint.deg2rad(prop.theta_3);\n            joint.link_1 = length === null || length === void 0 ? void 0 : length.coxa;\n            joint.link_2 = length === null || length === void 0 ? void 0 : length.tibia;\n            joint.link_3 = length === null || length === void 0 ? void 0 : length.femur;\n            break;\n          }\n\n        case 2:\n          {\n            joint.theta_1 = -joint.deg2rad(prop.theta_1);\n            joint.theta_2 = -joint.deg2rad(prop.theta_2);\n            joint.theta_3 = -joint.deg2rad(prop.theta_3);\n            joint.link_1 = length === null || length === void 0 ? void 0 : length.coxa;\n            joint.link_2 = length === null || length === void 0 ? void 0 : length.tibia;\n            joint.link_3 = length === null || length === void 0 ? void 0 : length.femur;\n            break;\n          }\n\n        case 3:\n          {\n            joint.theta_1 = -joint.deg2rad(prop.theta_1);\n            joint.theta_2 = -joint.deg2rad(prop.theta_2);\n            joint.theta_3 = -joint.deg2rad(prop.theta_3);\n            joint.link_1 = length === null || length === void 0 ? void 0 : length.coxa;\n            joint.link_2 = length === null || length === void 0 ? void 0 : length.tibia;\n            joint.link_3 = length === null || length === void 0 ? void 0 : length.femur;\n            break;\n          }\n\n        case 4:\n          {\n            joint.theta_1 = -joint.deg2rad(prop.theta_1);\n            joint.theta_2 = -joint.deg2rad(prop.theta_2);\n            joint.theta_3 = -joint.deg2rad(prop.theta_3);\n            joint.link_1 = length === null || length === void 0 ? void 0 : length.coxa;\n            joint.link_2 = length === null || length === void 0 ? void 0 : length.tibia;\n            joint.link_3 = length === null || length === void 0 ? void 0 : length.femur;\n            break;\n          }\n\n        default:\n          {}\n      }\n\n      return joint;\n    };\n\n    this.prepareJointFK = (leg, joint, props, length) => {\n      switch (leg) {\n        case 1:\n          {\n            joint.theta_1 = -joint.deg2rad(props[0][0]);\n            joint.theta_2 = -joint.deg2rad(180 - props[0][1] - 90);\n            joint.theta_3 = -joint.deg2rad(180 - props[0][2] - 90);\n            joint.link_1 = length.coxa;\n            joint.link_2 = length.tibia;\n            joint.link_3 = length.femur;\n            break;\n          }\n\n        case 2:\n          {\n            joint.theta_1 = -joint.deg2rad(180 - props[1][0]);\n            joint.theta_2 = -joint.deg2rad(180 - props[1][1] - 90);\n            joint.theta_3 = -joint.deg2rad(180 - props[1][2] - 90);\n            joint.link_1 = length.coxa;\n            joint.link_2 = length.tibia;\n            joint.link_3 = length.femur;\n            break;\n          }\n\n        case 3:\n          {\n            joint.theta_1 = -joint.deg2rad(props[2][0] - 180);\n            joint.theta_2 = -joint.deg2rad(180 - props[2][1] - 90);\n            joint.theta_3 = -joint.deg2rad(180 - props[2][2] - 90);\n            joint.link_1 = length.coxa;\n            joint.link_2 = length.tibia;\n            joint.link_3 = length.femur;\n            break;\n          }\n\n        case 4:\n          {\n            joint.theta_1 = -joint.deg2rad(props[3][0] - 180);\n            joint.theta_2 = -joint.deg2rad(180 - props[3][1] - 90);\n            joint.theta_3 = -joint.deg2rad(180 - props[3][2] - 90);\n            joint.link_1 = length.coxa;\n            joint.link_2 = length.tibia;\n            joint.link_3 = length.femur;\n            break;\n          }\n      }\n\n      return joint;\n    };\n\n    this.handleRotation = (rotation, currentPoint) => {\n      let theta_1 = this.deg2rad(rotation.rotX);\n      let theta_2 = this.deg2rad(rotation.rotY);\n      let theta_3 = this.deg2rad(rotation.rotZ);\n      let x = currentPoint.x;\n      let y = currentPoint.y;\n      let z = currentPoint.z;\n      let rotationMatrix = [y * (Math.cos(theta_1) * Math.sin(theta_3) + Math.cos(theta_3) * Math.sin(theta_1) * Math.sin(theta_2)) + z * (Math.sin(theta_1) * Math.sin(theta_3) - Math.cos(theta_1) * Math.cos(theta_3) * Math.sin(theta_2)) + x * Math.cos(theta_2) * Math.cos(theta_3), y * (Math.cos(theta_1) * Math.cos(theta_3) - Math.sin(theta_1) * Math.sin(theta_2) * Math.sin(theta_3)) + z * (Math.cos(theta_3) * Math.sin(theta_1) + Math.cos(theta_1) * Math.sin(theta_2) * Math.sin(theta_3)) - x * Math.cos(theta_2) * Math.sin(theta_3), x * Math.sin(theta_2) + z * Math.cos(theta_1) * Math.cos(theta_2) - y * Math.cos(theta_2) * Math.sin(theta_1)];\n      return {\n        x: rotationMatrix[0],\n        y: rotationMatrix[1],\n        z: rotationMatrix[2]\n      };\n    };\n\n    this.getGeneratedMesh = () => {\n      let mesh = {\n        x: [this.endEffectorPoints[0][0], this.endEffectorPoints[1][0], this.endEffectorPoints[2][0], this.endEffectorPoints[3][0]],\n        y: [-this.endEffectorPoints[0][1], -this.endEffectorPoints[1][1], -this.endEffectorPoints[2][1], -this.endEffectorPoints[3][1]],\n        z: [-this.endEffectorPoints[0][2], -this.endEffectorPoints[1][2], -this.endEffectorPoints[2][2], -this.endEffectorPoints[3][2]]\n      };\n      return mesh;\n    };\n\n    this.getCOMVector = (leg, joint, point) => {\n      let x_0 = leg[0][point];\n      let x_1 = leg[1][point];\n      let x_2 = leg[2][point];\n      return (joint.link_1_mass * x_0 + joint.link_2_mass * x_1 + joint.link_3_mass * x_2) / joint.total_mass;\n    };\n\n    this.bot = new Robot(_props);\n    this.joint_1 = new Joint(120, 110, 120, 0, 0, 0, 250, 250, 350);\n    this.joint_2 = new Joint(120, 110, 120, 0, 0, 0, 250, 250, 350);\n    this.joint_3 = new Joint(120, 110, 120, 0, 0, 0, 250, 250, 350);\n    this.joint_4 = new Joint(120, 110, 120, 0, 0, 0, 250, 250, 350);\n    this.endEffectorPoints = [[], [], [], []];\n\n    if (_props.choice) {\n      this.leg_1 = this.bot.getFK(this.prepareJointFK(1, this.joint_1, _props.fk, _props.lengths));\n      this.leg_2 = this.bot.getFK(this.prepareJointFK(2, this.joint_2, _props.fk, _props.lengths));\n      this.leg_3 = this.bot.getFK(this.prepareJointFK(3, this.joint_3, _props.fk, _props.lengths));\n      this.leg_4 = this.bot.getFK(this.prepareJointFK(4, this.joint_4, _props.fk, _props.lengths));\n    } else {\n      this.leg_1 = this.bot.getFK(this.preapreJointIK(1, this.joint_1, this.bot.getIK(_props.ik[0][0], _props.ik[0][1], _props.ik[0][2] || _props.frameCount, this.joint_1)));\n      this.leg_2 = this.bot.getFK(this.preapreJointIK(2, this.joint_2, this.bot.getIK(_props.ik[1][0], _props.ik[1][1], _props.ik[1][2], this.joint_2)));\n      this.leg_3 = this.bot.getFK(this.preapreJointIK(3, this.joint_3, this.bot.getIK(_props.ik[2][0], _props.ik[2][1], _props.ik[2][2], this.joint_3)));\n      this.leg_4 = this.bot.getFK(this.preapreJointIK(4, this.joint_4, this.bot.getIK(_props.ik[3][0], _props.ik[3][1], _props.ik[3][2], this.joint_4)));\n    }\n\n    this.state = {\n      bodyDimension: this.bot.getRobotBody(_props.radius),\n      showCogVectorTrace: false,\n      endEffectorPoints: []\n    };\n  }\n\n  componentDidMount() {// if (this.props.choice === \"IK\") {\n    //   for (let i = 0; i < 100; i++) {\n    //     this.leg_1 = this.bot.getFK(\n    //       this.preapreJointIK(\n    //         1,\n    //         this.joint_1,\n    //         this.bot.getIK(\n    //           this.props.ik[0][0],\n    //           this.props.ik[0][1],\n    //           i,\n    //           this.joint_1\n    //         ),\n    //         this.props.lengths\n    //       )\n    //     );\n    //   }\n    // }\n  }\n\n  deg2rad(degrees) {\n    var pi = Math.PI;\n    return degrees * (pi / 180);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      bodyDimension: this.bot.getRobotBody(nextProps.radius),\n      showCogVectorTrace: nextProps.showCogVectorTrace\n    });\n\n    if (nextProps.choice) {\n      this.leg_1 = this.bot.getFK(this.prepareJointFK(1, this.joint_1, nextProps.fk, nextProps.lengths));\n      this.leg_2 = this.bot.getFK(this.prepareJointFK(2, this.joint_2, nextProps.fk, nextProps.lengths));\n      this.leg_3 = this.bot.getFK(this.prepareJointFK(3, this.joint_3, nextProps.fk, nextProps.lengths));\n      this.leg_4 = this.bot.getFK(this.prepareJointFK(4, this.joint_4, nextProps.fk, nextProps.lengths));\n      this.endEffectorPoints = [[this.leg_1[2][0] - nextProps.translations.transX, -this.leg_1[2][1] - nextProps.translations.transY, -this.leg_1[2][2] - nextProps.translations.transZ], [this.leg_2[2][0] - nextProps.translations.transX, -this.leg_2[2][1] - nextProps.translations.transY, -this.leg_2[2][2] - nextProps.translations.transZ], [this.leg_3[2][0] - nextProps.translations.transX, -this.leg_3[2][1] - nextProps.translations.transY, -this.leg_3[2][2] - nextProps.translations.transZ], [this.leg_4[2][0] - nextProps.translations.transX, -this.leg_4[2][1] - nextProps.translations.transY, -this.leg_4[2][2] - nextProps.translations.transZ]];\n    } else {\n      this.endEffectorPoints = [[this.handleRotation(nextProps.rotations, {\n        x: nextProps.ik[0][0],\n        y: nextProps.ik[0][1],\n        z: nextProps.ik[0][2]\n      }).x - nextProps.translations.transX, this.handleRotation(nextProps.rotations, {\n        x: nextProps.ik[0][0],\n        y: nextProps.ik[0][1],\n        z: nextProps.ik[0][2]\n      }).y - nextProps.translations.transY, this.handleRotation(nextProps.rotations, {\n        x: nextProps.ik[0][0],\n        y: nextProps.ik[0][1],\n        z: nextProps.ik[0][2]\n      }).z - nextProps.translations.transZ], [this.handleRotation(nextProps.rotations, {\n        x: nextProps.ik[1][0],\n        y: nextProps.ik[1][1],\n        z: nextProps.ik[1][2]\n      }).x - nextProps.translations.transX, this.handleRotation(nextProps.rotations, {\n        x: nextProps.ik[1][0],\n        y: nextProps.ik[1][1],\n        z: nextProps.ik[1][2]\n      }).y - nextProps.translations.transY, this.handleRotation(nextProps.rotations, {\n        x: nextProps.ik[1][0],\n        y: nextProps.ik[1][1],\n        z: nextProps.ik[1][2]\n      }).z - nextProps.translations.transZ], [this.handleRotation(nextProps.rotations, {\n        x: nextProps.ik[2][0],\n        y: nextProps.ik[2][1],\n        z: nextProps.ik[2][2]\n      }).x - nextProps.translations.transX, this.handleRotation(nextProps.rotations, {\n        x: nextProps.ik[2][0],\n        y: nextProps.ik[2][1],\n        z: nextProps.ik[2][2]\n      }).y - nextProps.translations.transY, this.handleRotation(nextProps.rotations, {\n        x: nextProps.ik[2][0],\n        y: nextProps.ik[2][1],\n        z: nextProps.ik[2][2]\n      }).z - nextProps.translations.transZ], [this.handleRotation(nextProps.rotations, {\n        x: nextProps.ik[3][0],\n        y: nextProps.ik[3][1],\n        z: nextProps.ik[3][2]\n      }).x - nextProps.translations.transX, this.handleRotation(nextProps.rotations, {\n        x: nextProps.ik[3][0],\n        y: nextProps.ik[3][1],\n        z: nextProps.ik[3][2]\n      }).y - nextProps.translations.transY, this.handleRotation(nextProps.rotations, {\n        x: nextProps.ik[3][0],\n        y: nextProps.ik[3][1],\n        z: nextProps.ik[3][2]\n      }).z - nextProps.translations.transZ]];\n      this.leg_1 = this.bot.getFK(this.preapreJointIK(1, this.joint_1, this.bot.getIK(this.handleRotation(nextProps.rotations, {\n        x: nextProps.ik[0][0],\n        y: nextProps.ik[0][1],\n        z: nextProps.ik[0][2]\n      }).x - nextProps.translations.transX, this.handleRotation(nextProps.rotations, {\n        x: nextProps.ik[0][0],\n        y: nextProps.ik[0][1],\n        z: nextProps.ik[0][2]\n      }).y - nextProps.translations.transY, this.handleRotation(nextProps.rotations, {\n        x: nextProps.ik[0][0],\n        y: nextProps.ik[0][1],\n        z: nextProps.ik[0][2]\n      }).z - nextProps.translations.transZ, this.joint_1), nextProps.lengths));\n      this.leg_2 = this.bot.getFK(this.preapreJointIK(2, this.joint_2, this.bot.getIK(this.handleRotation(nextProps.rotations, {\n        x: nextProps.ik[1][0],\n        y: nextProps.ik[1][1],\n        z: nextProps.ik[1][2]\n      }).x - nextProps.translations.transX, this.handleRotation(nextProps.rotations, {\n        x: nextProps.ik[1][0],\n        y: nextProps.ik[1][1],\n        z: nextProps.ik[1][2]\n      }).y - nextProps.translations.transY, this.handleRotation(nextProps.rotations, {\n        x: nextProps.ik[1][0],\n        y: nextProps.ik[1][1],\n        z: nextProps.ik[1][2]\n      }).z - nextProps.translations.transZ, this.joint_2), nextProps.lengths));\n      this.leg_3 = this.bot.getFK(this.preapreJointIK(3, this.joint_3, this.bot.getIK(this.handleRotation(nextProps.rotations, {\n        x: nextProps.ik[2][0],\n        y: nextProps.ik[2][1],\n        z: nextProps.ik[2][2]\n      }).x - nextProps.translations.transX, this.handleRotation(nextProps.rotations, {\n        x: nextProps.ik[2][0],\n        y: nextProps.ik[2][1],\n        z: nextProps.ik[2][2]\n      }).y - nextProps.translations.transY, this.handleRotation(nextProps.rotations, {\n        x: nextProps.ik[2][0],\n        y: nextProps.ik[2][1],\n        z: nextProps.ik[2][2]\n      }).z - nextProps.translations.transZ, this.joint_3), nextProps.lengths));\n      this.leg_4 = this.bot.getFK(this.preapreJointIK(4, this.joint_4, this.bot.getIK(this.handleRotation(nextProps.rotations, {\n        x: nextProps.ik[3][0],\n        y: nextProps.ik[3][1],\n        z: nextProps.ik[3][2]\n      }).x - nextProps.translations.transX, this.handleRotation(nextProps.rotations, {\n        x: nextProps.ik[3][0],\n        y: nextProps.ik[3][1],\n        z: nextProps.ik[3][2]\n      }).y - nextProps.translations.transY, this.handleRotation(nextProps.rotations, {\n        x: nextProps.ik[3][0],\n        y: nextProps.ik[3][1],\n        z: nextProps.ik[3][2]\n      }).z - nextProps.translations.transZ, this.joint_4), nextProps.lengths));\n    }\n  }\n\n  render() {\n    return React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 718\n      },\n      __self: this\n    }, React.createElement(Plot, {\n      data: [{\n        x: this.state.bodyDimension.x,\n        y: this.state.bodyDimension.y,\n        z: this.state.bodyDimension.z,\n        type: \"mesh3d\",\n        mode: \"lines+markers\",\n        line: {\n          width: 6,\n          colorscale: \"Viridis\"\n        },\n        marker: {\n          size: 3.5,\n          colorscale: \"Greens\",\n          cmin: -20,\n          cmax: 50\n        }\n      }, {\n        // LEG 1\n        x: [0, this.leg_1[0][0], this.leg_1[1][0], this.leg_1[2][0]],\n        y: [0, this.leg_1[0][1], this.leg_1[1][1], this.leg_1[2][1]],\n        z: [0, this.leg_1[0][2], this.leg_1[1][2], this.leg_1[2][2]],\n        type: \"scatter3d\",\n        mode: \"lines+markers\",\n        line: {\n          width: 6,\n          colorscale: \"Viridis\"\n        },\n        marker: {\n          size: 3.5,\n          colorscale: \"Reds\",\n          cmin: -20,\n          cmax: 50\n        }\n      }, {\n        // LEG 2\n        x: [0, this.leg_2[0][0], this.leg_2[1][0], this.leg_2[2][0]],\n        y: [0, this.leg_2[0][1], this.leg_2[1][1], this.leg_2[2][1]],\n        z: [0, this.leg_2[0][2], this.leg_2[1][2], this.leg_2[2][2]],\n        type: \"scatter3d\",\n        mode: \"lines+markers\",\n        line: {\n          width: 6,\n          colorscale: \"Viridis\"\n        },\n        marker: {\n          size: 3.5,\n          colorscale: \"Greens\",\n          cmin: -20,\n          cmax: 50\n        }\n      }, {\n        // LEG 3\n        x: [0, this.leg_3[0][0], this.leg_3[1][0], this.leg_3[2][0]],\n        y: [0, this.leg_3[0][1], this.leg_3[1][1], this.leg_3[2][1]],\n        z: [0, this.leg_3[0][2], this.leg_3[1][2], this.leg_3[2][2]],\n        type: \"scatter3d\",\n        mode: \"lines+markers\",\n        line: {\n          width: 6,\n          colorscale: \"Viridis\"\n        },\n        marker: {\n          size: 3.5,\n          colorscale: \"Greens\",\n          cmin: -20,\n          cmax: 50\n        }\n      }, {\n        // LEG 4\n        x: [0, this.leg_4[0][0], this.leg_4[1][0], this.leg_4[2][0]],\n        y: [0, this.leg_4[0][1], this.leg_4[1][1], this.leg_4[2][1]],\n        z: [0, this.leg_4[0][2], this.leg_4[1][2], this.leg_4[2][2]],\n        type: \"scatter3d\",\n        mode: \"lines+markers\",\n        line: {\n          width: 6,\n          colorscale: \"Viridis\"\n        },\n        marker: {\n          size: 3.5,\n          colorscale: \"Greens\",\n          cmin: -20,\n          cmax: 50\n        }\n      }, {\n        // LEG 1 CG POINTS\n        x: this.state.showCogVectorTrace ? [0, this.leg_1[0][0], 0, this.leg_1[1][0], 0, this.leg_1[2][0], 0, this.leg_2[0][0], 0, this.leg_2[1][0], 0, this.leg_2[2][0], 0, this.leg_3[0][0], 0, this.leg_3[1][0], 0, this.leg_3[2][0], 0, this.leg_4[0][0], 0, this.leg_4[1][0], 0, this.leg_4[2][0]] : [],\n        y: this.state.showCogVectorTrace ? [0, this.leg_1[0][1], 0, this.leg_1[1][1], 0, this.leg_1[2][1], 0, this.leg_2[0][1], 0, this.leg_2[1][1], 0, this.leg_2[2][1], 0, this.leg_3[0][1], 0, this.leg_3[1][1], 0, this.leg_3[2][1], 0, this.leg_4[0][1], 0, this.leg_4[1][1], 0, this.leg_4[2][1]] : [],\n        z: this.state.showCogVectorTrace ? [0, this.leg_1[0][2], 0, this.leg_1[1][2], 0, this.leg_1[2][2], 0, this.leg_2[0][2], 0, this.leg_2[1][2], 0, this.leg_2[2][2], 0, this.leg_3[0][2], 0, this.leg_3[1][2], 0, this.leg_3[2][2], 0, this.leg_4[0][2], 0, this.leg_4[1][2], 0, this.leg_4[2][2]] : [],\n        type: \"scatter3d\",\n        mode: \"lines+markers\",\n        line: {\n          width: 3,\n          colorscale: \"Viridis\"\n        },\n        marker: {\n          size: 3.5,\n          colorscale: \"Reds\",\n          cmin: -20,\n          cmax: 50\n        }\n      }, {\n        x: [this.getCOMVector(this.leg_1, this.joint_1, 0), this.getCOMVector(this.leg_2, this.joint_2, 0), this.getCOMVector(this.leg_3, this.joint_3, 0), this.getCOMVector(this.leg_4, this.joint_4, 0)],\n        y: [this.getCOMVector(this.leg_1, this.joint_1, 1), this.getCOMVector(this.leg_2, this.joint_2, 1), this.getCOMVector(this.leg_3, this.joint_3, 1), this.getCOMVector(this.leg_4, this.joint_4, 1)],\n        z: [this.getCOMVector(this.leg_1, this.joint_1, 2), this.getCOMVector(this.leg_2, this.joint_2, 2), this.getCOMVector(this.leg_3, this.joint_3, 2), this.getCOMVector(this.leg_4, this.joint_4, 2)],\n        mode: \"markers\",\n        type: \"scatter3d\",\n        marker: {\n          color: \"gba(255, 0, 0, 0.8)\",\n          size: 4\n        }\n      }, {\n        x: this.props.showMesh ? this.getGeneratedMesh().x : [0],\n        y: this.props.showMesh ? this.getGeneratedMesh().y : [0],\n        z: this.props.showMesh ? this.getGeneratedMesh().z : [0],\n        color: \"rgb(300,100,200)\",\n        type: \"mesh3d\",\n        opacity: 0.3\n      }],\n      layout: {\n        autosize: false,\n        height: 999,\n        width: 1080,\n        scene: {\n          aspectmode: \"manual\",\n          aspectratio: {\n            x: 1,\n            y: 1,\n            z: 1\n          },\n          xaxis: {\n            nticks: 9,\n            range: [-350, 350]\n          },\n          yaxis: {\n            nticks: 7,\n            range: [-350, 350]\n          },\n          zaxis: {\n            nticks: 10,\n            range: [-350, 350]\n          }\n        },\n        legend: {\n          bgcolor: \"#ffffff1c\",\n          orientation: \"h\",\n          font: {\n            color: \"black\",\n            family: \"Montserrat\"\n          }\n        },\n        title: {\n          text: \"Quadruped Simulation\",\n          font: {\n            family: \"Montserrat\",\n            size: 24,\n            color: \"black\"\n          },\n          xref: \"paper\"\n        }\n      },\n      frames: [{\n        // LEG 1\n        x: [0, this.leg_1[0][0], this.leg_1[1][0], this.leg_1[2][0]],\n        y: [0, this.leg_1[0][1], this.leg_1[1][1], this.leg_1[2][1]],\n        z: [0, this.leg_1[0][2], this.leg_1[1][2], this.leg_1[2][2]],\n        type: \"scatter3d\",\n        mode: \"lines+markers\",\n        line: {\n          width: 6,\n          colorscale: \"Viridis\"\n        },\n        marker: {\n          size: 3.5,\n          colorscale: \"Reds\",\n          cmin: -20,\n          cmax: 50\n        }\n      }],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 719\n      },\n      __self: this\n    }));\n  }\n\n}","map":{"version":3,"sources":["/Users/pratikgurudatt/Desktop/code/mine/Thesis/Quadruped/Simulator/Quadruped-Simulation-/src/Components/PlotArea/mainPlot.js"],"names":["React","Component","styled","Plot","Container","div","Joint","constructor","link_1","link_2","link_3","theta_1","theta_2","theta_3","link_1_mass","link_2_mass","link_3_mass","name","joint","total_mass","rad2deg","value","pi","Math","PI","deg2rad","degrees","printJoint","console","log","Robot","bodyRadius","getRobotBody","rads","x","y","z","_filterEndPoint","point_set","_multiplyMatrices","firstArray","secondArray","resultingArray","n","i","push","j","k","getPointFK","point","T0_1","cos","sin","T0_2","T0_3","T0_4","point_set_1","point_set_2","point_set_3","coords","getFK","getIK","atan2","A","B","C","pow","sqrt","D","E","numerator","denominator","getFrame","frameCount","props","PlotArea","preapreJointIK","leg","prop","length","coxa","tibia","femur","prepareJointFK","handleRotation","rotation","currentPoint","rotX","rotY","rotZ","rotationMatrix","getGeneratedMesh","mesh","endEffectorPoints","getCOMVector","x_0","x_1","x_2","bot","joint_1","joint_2","joint_3","joint_4","choice","leg_1","fk","lengths","leg_2","leg_3","leg_4","ik","state","bodyDimension","radius","showCogVectorTrace","componentDidMount","componentWillReceiveProps","nextProps","setState","translations","transX","transY","transZ","rotations","render","type","mode","line","width","colorscale","marker","size","cmin","cmax","color","showMesh","opacity","autosize","height","scene","aspectmode","aspectratio","xaxis","nticks","range","yaxis","zaxis","legend","bgcolor","orientation","font","family","title","text","xref"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport Plot from \"react-plotly.js\";\n\nexport const Container = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  background-color: rgba(255, 255, 255, 0.2);\n  border-radius: 5px;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n`;\n\nclass Joint {\n  constructor(\n    link_1,\n    link_2,\n    link_3,\n    theta_1,\n    theta_2,\n    theta_3,\n    link_1_mass,\n    link_2_mass,\n    link_3_mass,\n    name\n  ) {\n    this.joint = {\n      theta_1: theta_1,\n      theta_2: theta_2,\n      theta_3: theta_3,\n\n      link_1: link_1,\n      link_2: link_2,\n      link_3: link_3,\n      name: name,\n\n      link_1_mass: link_1_mass,\n      link_2_mass: link_2_mass,\n      link_3_mass: link_3_mass,\n      total_mass: this.link_1_mass + this.link_2_mass + this.link_3_mass,\n    };\n  }\n\n  rad2deg(value) {\n    var pi = Math.PI;\n    return value * (180 / pi);\n  }\n\n  deg2rad(degrees) {\n    var pi = Math.PI;\n    return degrees * (pi / 180);\n  }\n\n  printJoint() {\n    console.log(\"Link 1: \" + this.theta_1);\n    console.log(\"link 2: \" + this.theta_2);\n    console.log(\"link 3: \" + this.theta_3);\n  }\n}\n\nclass Robot {\n  constructor() {\n    this.bodyRadius = 0;\n  }\n\n  getRobotBody(rads) {\n    //[ -50, 50, 50, -50, -50 ], [ -50, -50, 50, 50, -50 ], [0, 0, 0, 0, 0]\n    let x = [-rads, rads, rads, -rads, -rads];\n    let y = [-rads, -rads, rads, rads, -rads];\n    let z = [0, 0, 0, 0, 0];\n    return {\n      x: x,\n      y: y,\n      z: z,\n    };\n  }\n\n  _filterEndPoint(point_set) {\n    return [\n      [point_set[0][0][3], point_set[0][1][3], point_set[0][2][3]],\n      [point_set[1][0][3], point_set[1][1][3], point_set[1][2][3]],\n      [point_set[2][0][3], point_set[2][1][3], point_set[2][2][3]],\n    ];\n  }\n\n  _multiplyMatrices(firstArray, secondArray) {\n    let resultingArray = [];\n    let n = 4;\n    for (let i = 0; i < n; i++) {\n      resultingArray.push([]);\n      for (let j = 0; j < n; j++) {\n        resultingArray[i][j] = 0;\n        for (let k = 0; k < n; k++) {\n          resultingArray[i][j] += firstArray[i][k] * secondArray[k][j];\n        }\n      }\n    }\n    return resultingArray;\n  }\n\n  getPointFK(joint, point) {\n    let T0_1 = [\n      [Math.cos(joint.theta_1), -Math.sin(joint.theta_1), 0, 0],\n      [Math.sin(joint.theta_1), Math.cos(joint.theta_1), 0, 0],\n      [0, 0, 1, 0],\n      [0, 0, 0, 1],\n    ];\n\n    let T0_2 = [\n      [Math.cos(joint.theta_2), -Math.sin(joint.theta_2), 0, joint.link_1],\n      [0, 0, -1, 0],\n      [Math.sin(joint.theta_2), Math.cos(joint.theta_2), 0, 0],\n      [0, 0, 0, 1],\n    ];\n\n    let T0_3 = [\n      [Math.cos(joint.theta_3), -Math.sin(joint.theta_3), 0, joint.link_2],\n      [Math.sin(joint.theta_3), Math.cos(joint.theta_3), 0, 0],\n      [0, 0, 1, 0],\n      [0, 0, 0, 1],\n    ];\n\n    let T0_4 = [\n      [1, 0, 0, joint.link_3],\n      [0, 1, 0, 0],\n      [0, 0, 1, 0],\n      [0, 0, 0, 1],\n    ];\n\n    let point_set_1 = this._multiplyMatrices(T0_1, T0_2);\n    let point_set_2 = this._multiplyMatrices(point_set_1, T0_3);\n    let point_set_3 = this._multiplyMatrices(point_set_2, T0_4);\n\n    let coords = {\n      0: [point_set_1[0][3], point_set_1[1][3], point_set_1[2][3]],\n      1: [point_set_2[0][3], point_set_2[1][3], point_set_2[2][3]],\n      2: [point_set_3[0][3], point_set_3[1][3], point_set_3[2][3]],\n    };\n\n    return coords[point];\n  }\n\n  getFK(joint) {\n    let T0_1 = [\n      [Math.cos(joint.theta_1), -Math.sin(joint.theta_1), 0, 0],\n      [Math.sin(joint.theta_1), Math.cos(joint.theta_1), 0, 0],\n      [0, 0, 1, 0],\n      [0, 0, 0, 1],\n    ];\n\n    let T0_2 = [\n      [Math.cos(joint.theta_2), -Math.sin(joint.theta_2), 0, joint.link_1],\n      [0, 0, -1, 0],\n      [Math.sin(joint.theta_2), Math.cos(joint.theta_2), 0, 0],\n      [0, 0, 0, 1],\n    ];\n\n    let T0_3 = [\n      [Math.cos(joint.theta_3), -Math.sin(joint.theta_3), 0, joint.link_2],\n      [Math.sin(joint.theta_3), Math.cos(joint.theta_3), 0, 0],\n      [0, 0, 1, 0],\n      [0, 0, 0, 1],\n    ];\n\n    let T0_4 = [\n      [1, 0, 0, joint.link_3],\n      [0, 1, 0, 0],\n      [0, 0, 1, 0],\n      [0, 0, 0, 1],\n    ];\n\n    let point_set_1 = this._multiplyMatrices(T0_1, T0_2);\n    let point_set_2 = this._multiplyMatrices(point_set_1, T0_3);\n    let point_set_3 = this._multiplyMatrices(point_set_2, T0_4);\n\n    return this._filterEndPoint([point_set_1, point_set_2, point_set_3]);\n  }\n\n  getIK(x, y, z, joint) {\n    let theta_1 = Math.atan2(y, x);\n    let A = z;\n    let B = Math.cos(theta_1) * x + y * Math.sin(theta_1) - joint.link_1;\n    let C =\n      (Math.pow(A, 2) +\n        Math.pow(B, 2) -\n        Math.pow(joint.link_3, 2) -\n        Math.pow(joint.link_2, 2)) /\n      (2 * joint.link_3 * joint.link_2);\n    let theta_3 = Math.atan2(Math.sqrt(1 - Math.pow(C, 2)), C);\n    let D = Math.cos(theta_3) * joint.link_3 + joint.link_2;\n    let E = Math.sin(theta_3) * joint.link_3;\n\n    let numerator = (A * D - B * E) / (Math.pow(E, 2) + Math.pow(D, 2));\n    let denominator = 1 - Math.pow(numerator, 2);\n\n    let theta_2 = Math.atan2(numerator, Math.sqrt(denominator));\n\n    joint.theta_1 = joint.rad2deg(theta_1);\n    joint.theta_2 = joint.rad2deg(theta_2);\n    joint.theta_3 = joint.rad2deg(theta_3);\n\n    return joint;\n  }\n\n  getFrame(frameCount, props) {}\n}\n\nexport default class PlotArea extends Component {\n  constructor(props) {\n    super();\n    this.bot = new Robot(props);\n    this.joint_1 = new Joint(120, 110, 120, 0, 0, 0, 250, 250, 350);\n    this.joint_2 = new Joint(120, 110, 120, 0, 0, 0, 250, 250, 350);\n    this.joint_3 = new Joint(120, 110, 120, 0, 0, 0, 250, 250, 350);\n    this.joint_4 = new Joint(120, 110, 120, 0, 0, 0, 250, 250, 350);\n\n    this.endEffectorPoints = [[], [], [], []];\n\n    if (props.choice) {\n      this.leg_1 = this.bot.getFK(\n        this.prepareJointFK(1, this.joint_1, props.fk, props.lengths)\n      );\n      this.leg_2 = this.bot.getFK(\n        this.prepareJointFK(2, this.joint_2, props.fk, props.lengths)\n      );\n      this.leg_3 = this.bot.getFK(\n        this.prepareJointFK(3, this.joint_3, props.fk, props.lengths)\n      );\n      this.leg_4 = this.bot.getFK(\n        this.prepareJointFK(4, this.joint_4, props.fk, props.lengths)\n      );\n    } else {\n      this.leg_1 = this.bot.getFK(\n        this.preapreJointIK(\n          1,\n          this.joint_1,\n          this.bot.getIK(\n            props.ik[0][0],\n            props.ik[0][1],\n            props.ik[0][2] || props.frameCount,\n            this.joint_1\n          )\n        )\n      );\n\n      this.leg_2 = this.bot.getFK(\n        this.preapreJointIK(\n          2,\n          this.joint_2,\n          this.bot.getIK(\n            props.ik[1][0],\n            props.ik[1][1],\n            props.ik[1][2],\n            this.joint_2\n          )\n        )\n      );\n\n      this.leg_3 = this.bot.getFK(\n        this.preapreJointIK(\n          3,\n          this.joint_3,\n          this.bot.getIK(\n            props.ik[2][0],\n            props.ik[2][1],\n            props.ik[2][2],\n            this.joint_3\n          )\n        )\n      );\n\n      this.leg_4 = this.bot.getFK(\n        this.preapreJointIK(\n          4,\n          this.joint_4,\n          this.bot.getIK(\n            props.ik[3][0],\n            props.ik[3][1],\n            props.ik[3][2],\n            this.joint_4\n          )\n        )\n      );\n    }\n\n    this.state = {\n      bodyDimension: this.bot.getRobotBody(props.radius),\n      showCogVectorTrace: false,\n      endEffectorPoints: [],\n    };\n  }\n\n  componentDidMount() {\n    // if (this.props.choice === \"IK\") {\n    //   for (let i = 0; i < 100; i++) {\n    //     this.leg_1 = this.bot.getFK(\n    //       this.preapreJointIK(\n    //         1,\n    //         this.joint_1,\n    //         this.bot.getIK(\n    //           this.props.ik[0][0],\n    //           this.props.ik[0][1],\n    //           i,\n    //           this.joint_1\n    //         ),\n    //         this.props.lengths\n    //       )\n    //     );\n    //   }\n    // }\n  }\n\n  preapreJointIK = (leg, joint, prop, length) => {\n    switch (leg) {\n      case 1: {\n        joint.theta_1 = -joint.deg2rad(prop.theta_1);\n        joint.theta_2 = -joint.deg2rad(prop.theta_2);\n        joint.theta_3 = -joint.deg2rad(prop.theta_3);\n        joint.link_1 = length?.coxa;\n        joint.link_2 = length?.tibia;\n        joint.link_3 = length?.femur;\n        break;\n      }\n\n      case 2: {\n        joint.theta_1 = -joint.deg2rad(prop.theta_1);\n        joint.theta_2 = -joint.deg2rad(prop.theta_2);\n        joint.theta_3 = -joint.deg2rad(prop.theta_3);\n        joint.link_1 = length?.coxa;\n        joint.link_2 = length?.tibia;\n        joint.link_3 = length?.femur;\n        break;\n      }\n\n      case 3: {\n        joint.theta_1 = -joint.deg2rad(prop.theta_1);\n        joint.theta_2 = -joint.deg2rad(prop.theta_2);\n        joint.theta_3 = -joint.deg2rad(prop.theta_3);\n        joint.link_1 = length?.coxa;\n        joint.link_2 = length?.tibia;\n        joint.link_3 = length?.femur;\n        break;\n      }\n\n      case 4: {\n        joint.theta_1 = -joint.deg2rad(prop.theta_1);\n        joint.theta_2 = -joint.deg2rad(prop.theta_2);\n        joint.theta_3 = -joint.deg2rad(prop.theta_3);\n        joint.link_1 = length?.coxa;\n        joint.link_2 = length?.tibia;\n        joint.link_3 = length?.femur;\n        break;\n      }\n\n      default: {\n      }\n    }\n    return joint;\n  };\n\n  deg2rad(degrees) {\n    var pi = Math.PI;\n    return degrees * (pi / 180);\n  }\n\n  prepareJointFK = (leg, joint, props, length) => {\n    switch (leg) {\n      case 1: {\n        joint.theta_1 = -joint.deg2rad(props[0][0]);\n        joint.theta_2 = -joint.deg2rad(180 - props[0][1] - 90);\n        joint.theta_3 = -joint.deg2rad(180 - props[0][2] - 90);\n        joint.link_1 = length.coxa;\n        joint.link_2 = length.tibia;\n        joint.link_3 = length.femur;\n        break;\n      }\n\n      case 2: {\n        joint.theta_1 = -joint.deg2rad(180 - props[1][0]);\n        joint.theta_2 = -joint.deg2rad(180 - props[1][1] - 90);\n        joint.theta_3 = -joint.deg2rad(180 - props[1][2] - 90);\n        joint.link_1 = length.coxa;\n        joint.link_2 = length.tibia;\n        joint.link_3 = length.femur;\n        break;\n      }\n\n      case 3: {\n        joint.theta_1 = -joint.deg2rad(props[2][0] - 180);\n        joint.theta_2 = -joint.deg2rad(180 - props[2][1] - 90);\n        joint.theta_3 = -joint.deg2rad(180 - props[2][2] - 90);\n        joint.link_1 = length.coxa;\n        joint.link_2 = length.tibia;\n        joint.link_3 = length.femur;\n        break;\n      }\n\n      case 4: {\n        joint.theta_1 = -joint.deg2rad(props[3][0] - 180);\n        joint.theta_2 = -joint.deg2rad(180 - props[3][1] - 90);\n        joint.theta_3 = -joint.deg2rad(180 - props[3][2] - 90);\n        joint.link_1 = length.coxa;\n        joint.link_2 = length.tibia;\n        joint.link_3 = length.femur;\n        break;\n      }\n    }\n    return joint;\n  };\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      bodyDimension: this.bot.getRobotBody(nextProps.radius),\n      showCogVectorTrace: nextProps.showCogVectorTrace,\n    });\n\n    if (nextProps.choice) {\n      this.leg_1 = this.bot.getFK(\n        this.prepareJointFK(1, this.joint_1, nextProps.fk, nextProps.lengths)\n      );\n      this.leg_2 = this.bot.getFK(\n        this.prepareJointFK(2, this.joint_2, nextProps.fk, nextProps.lengths)\n      );\n      this.leg_3 = this.bot.getFK(\n        this.prepareJointFK(3, this.joint_3, nextProps.fk, nextProps.lengths)\n      );\n      this.leg_4 = this.bot.getFK(\n        this.prepareJointFK(4, this.joint_4, nextProps.fk, nextProps.lengths)\n      );\n\n      this.endEffectorPoints = [\n        [\n          this.leg_1[2][0] - nextProps.translations.transX,\n          -this.leg_1[2][1] - nextProps.translations.transY,\n          -this.leg_1[2][2] - nextProps.translations.transZ,\n        ],\n        [\n          this.leg_2[2][0] - nextProps.translations.transX,\n          -this.leg_2[2][1] - nextProps.translations.transY,\n          -this.leg_2[2][2] - nextProps.translations.transZ,\n        ],\n        [\n          this.leg_3[2][0] - nextProps.translations.transX,\n          -this.leg_3[2][1] - nextProps.translations.transY,\n          -this.leg_3[2][2] - nextProps.translations.transZ,\n        ],\n        [\n          this.leg_4[2][0] - nextProps.translations.transX,\n          -this.leg_4[2][1] - nextProps.translations.transY,\n          -this.leg_4[2][2] - nextProps.translations.transZ,\n        ],\n      ];\n    } else {\n      this.endEffectorPoints = [\n        [\n          this.handleRotation(nextProps.rotations, {\n            x: nextProps.ik[0][0],\n            y: nextProps.ik[0][1],\n            z: nextProps.ik[0][2],\n          }).x - nextProps.translations.transX,\n\n          this.handleRotation(nextProps.rotations, {\n            x: nextProps.ik[0][0],\n            y: nextProps.ik[0][1],\n            z: nextProps.ik[0][2],\n          }).y - nextProps.translations.transY,\n\n          this.handleRotation(nextProps.rotations, {\n            x: nextProps.ik[0][0],\n            y: nextProps.ik[0][1],\n            z: nextProps.ik[0][2],\n          }).z - nextProps.translations.transZ,\n        ],\n        [\n          this.handleRotation(nextProps.rotations, {\n            x: nextProps.ik[1][0],\n            y: nextProps.ik[1][1],\n            z: nextProps.ik[1][2],\n          }).x - nextProps.translations.transX,\n\n          this.handleRotation(nextProps.rotations, {\n            x: nextProps.ik[1][0],\n            y: nextProps.ik[1][1],\n            z: nextProps.ik[1][2],\n          }).y - nextProps.translations.transY,\n\n          this.handleRotation(nextProps.rotations, {\n            x: nextProps.ik[1][0],\n            y: nextProps.ik[1][1],\n            z: nextProps.ik[1][2],\n          }).z - nextProps.translations.transZ,\n        ],\n        [\n          this.handleRotation(nextProps.rotations, {\n            x: nextProps.ik[2][0],\n            y: nextProps.ik[2][1],\n            z: nextProps.ik[2][2],\n          }).x - nextProps.translations.transX,\n\n          this.handleRotation(nextProps.rotations, {\n            x: nextProps.ik[2][0],\n            y: nextProps.ik[2][1],\n            z: nextProps.ik[2][2],\n          }).y - nextProps.translations.transY,\n\n          this.handleRotation(nextProps.rotations, {\n            x: nextProps.ik[2][0],\n            y: nextProps.ik[2][1],\n            z: nextProps.ik[2][2],\n          }).z - nextProps.translations.transZ,\n        ],\n        [\n          this.handleRotation(nextProps.rotations, {\n            x: nextProps.ik[3][0],\n            y: nextProps.ik[3][1],\n            z: nextProps.ik[3][2],\n          }).x - nextProps.translations.transX,\n\n          this.handleRotation(nextProps.rotations, {\n            x: nextProps.ik[3][0],\n            y: nextProps.ik[3][1],\n            z: nextProps.ik[3][2],\n          }).y - nextProps.translations.transY,\n\n          this.handleRotation(nextProps.rotations, {\n            x: nextProps.ik[3][0],\n            y: nextProps.ik[3][1],\n            z: nextProps.ik[3][2],\n          }).z - nextProps.translations.transZ,\n        ],\n      ];\n\n      this.leg_1 = this.bot.getFK(\n        this.preapreJointIK(\n          1,\n          this.joint_1,\n          this.bot.getIK(\n            this.handleRotation(nextProps.rotations, {\n              x: nextProps.ik[0][0],\n              y: nextProps.ik[0][1],\n              z: nextProps.ik[0][2],\n            }).x - nextProps.translations.transX,\n\n            this.handleRotation(nextProps.rotations, {\n              x: nextProps.ik[0][0],\n              y: nextProps.ik[0][1],\n              z: nextProps.ik[0][2],\n            }).y - nextProps.translations.transY,\n\n            this.handleRotation(nextProps.rotations, {\n              x: nextProps.ik[0][0],\n              y: nextProps.ik[0][1],\n              z: nextProps.ik[0][2],\n            }).z - nextProps.translations.transZ,\n            this.joint_1\n          ),\n          nextProps.lengths\n        )\n      );\n\n      this.leg_2 = this.bot.getFK(\n        this.preapreJointIK(\n          2,\n          this.joint_2,\n          this.bot.getIK(\n            this.handleRotation(nextProps.rotations, {\n              x: nextProps.ik[1][0],\n              y: nextProps.ik[1][1],\n              z: nextProps.ik[1][2],\n            }).x - nextProps.translations.transX,\n\n            this.handleRotation(nextProps.rotations, {\n              x: nextProps.ik[1][0],\n              y: nextProps.ik[1][1],\n              z: nextProps.ik[1][2],\n            }).y - nextProps.translations.transY,\n\n            this.handleRotation(nextProps.rotations, {\n              x: nextProps.ik[1][0],\n              y: nextProps.ik[1][1],\n              z: nextProps.ik[1][2],\n            }).z - nextProps.translations.transZ,\n            this.joint_2\n          ),\n          nextProps.lengths\n        )\n      );\n\n      this.leg_3 = this.bot.getFK(\n        this.preapreJointIK(\n          3,\n          this.joint_3,\n          this.bot.getIK(\n            this.handleRotation(nextProps.rotations, {\n              x: nextProps.ik[2][0],\n              y: nextProps.ik[2][1],\n              z: nextProps.ik[2][2],\n            }).x - nextProps.translations.transX,\n\n            this.handleRotation(nextProps.rotations, {\n              x: nextProps.ik[2][0],\n              y: nextProps.ik[2][1],\n              z: nextProps.ik[2][2],\n            }).y - nextProps.translations.transY,\n\n            this.handleRotation(nextProps.rotations, {\n              x: nextProps.ik[2][0],\n              y: nextProps.ik[2][1],\n              z: nextProps.ik[2][2],\n            }).z - nextProps.translations.transZ,\n            this.joint_3\n          ),\n          nextProps.lengths\n        )\n      );\n\n      this.leg_4 = this.bot.getFK(\n        this.preapreJointIK(\n          4,\n          this.joint_4,\n          this.bot.getIK(\n            this.handleRotation(nextProps.rotations, {\n              x: nextProps.ik[3][0],\n              y: nextProps.ik[3][1],\n              z: nextProps.ik[3][2],\n            }).x - nextProps.translations.transX,\n            this.handleRotation(nextProps.rotations, {\n              x: nextProps.ik[3][0],\n              y: nextProps.ik[3][1],\n              z: nextProps.ik[3][2],\n            }).y - nextProps.translations.transY,\n            this.handleRotation(nextProps.rotations, {\n              x: nextProps.ik[3][0],\n              y: nextProps.ik[3][1],\n              z: nextProps.ik[3][2],\n            }).z - nextProps.translations.transZ,\n            this.joint_4\n          ),\n          nextProps.lengths\n        )\n      );\n    }\n  }\n\n  handleRotation = (rotation, currentPoint) => {\n    let theta_1 = this.deg2rad(rotation.rotX);\n    let theta_2 = this.deg2rad(rotation.rotY);\n    let theta_3 = this.deg2rad(rotation.rotZ);\n\n    let x = currentPoint.x;\n    let y = currentPoint.y;\n    let z = currentPoint.z;\n\n    let rotationMatrix = [\n      y *\n        (Math.cos(theta_1) * Math.sin(theta_3) +\n          Math.cos(theta_3) * Math.sin(theta_1) * Math.sin(theta_2)) +\n        z *\n          (Math.sin(theta_1) * Math.sin(theta_3) -\n            Math.cos(theta_1) * Math.cos(theta_3) * Math.sin(theta_2)) +\n        x * Math.cos(theta_2) * Math.cos(theta_3),\n      y *\n        (Math.cos(theta_1) * Math.cos(theta_3) -\n          Math.sin(theta_1) * Math.sin(theta_2) * Math.sin(theta_3)) +\n        z *\n          (Math.cos(theta_3) * Math.sin(theta_1) +\n            Math.cos(theta_1) * Math.sin(theta_2) * Math.sin(theta_3)) -\n        x * Math.cos(theta_2) * Math.sin(theta_3),\n      x * Math.sin(theta_2) +\n        z * Math.cos(theta_1) * Math.cos(theta_2) -\n        y * Math.cos(theta_2) * Math.sin(theta_1),\n    ];\n\n    return { x: rotationMatrix[0], y: rotationMatrix[1], z: rotationMatrix[2] };\n  };\n\n  getGeneratedMesh = () => {\n    let mesh = {\n      x: [\n        this.endEffectorPoints[0][0],\n        this.endEffectorPoints[1][0],\n        this.endEffectorPoints[2][0],\n        this.endEffectorPoints[3][0],\n      ],\n      y: [\n        -this.endEffectorPoints[0][1],\n        -this.endEffectorPoints[1][1],\n        -this.endEffectorPoints[2][1],\n        -this.endEffectorPoints[3][1],\n      ],\n      z: [\n        -this.endEffectorPoints[0][2],\n        -this.endEffectorPoints[1][2],\n        -this.endEffectorPoints[2][2],\n        -this.endEffectorPoints[3][2],\n      ],\n    };\n    return mesh;\n  };\n\n  getCOMVector = (leg, joint, point) => {\n    let x_0 = leg[0][point];\n    let x_1 = leg[1][point];\n    let x_2 = leg[2][point];\n\n    return (\n      (joint.link_1_mass * x_0 +\n        joint.link_2_mass * x_1 +\n        joint.link_3_mass * x_2) /\n      joint.total_mass\n    );\n  };\n\n  render() {\n    return (\n      <Container>\n        <Plot\n          data={[\n            {\n              x: this.state.bodyDimension.x,\n              y: this.state.bodyDimension.y,\n              z: this.state.bodyDimension.z,\n              type: \"mesh3d\",\n              mode: \"lines+markers\",\n              line: {\n                width: 6,\n                colorscale: \"Viridis\",\n              },\n              marker: {\n                size: 3.5,\n                colorscale: \"Greens\",\n                cmin: -20,\n                cmax: 50,\n              },\n            },\n            {\n              // LEG 1\n              x: [0, this.leg_1[0][0], this.leg_1[1][0], this.leg_1[2][0]],\n              y: [0, this.leg_1[0][1], this.leg_1[1][1], this.leg_1[2][1]],\n              z: [0, this.leg_1[0][2], this.leg_1[1][2], this.leg_1[2][2]],\n              type: \"scatter3d\",\n              mode: \"lines+markers\",\n              line: {\n                width: 6,\n                colorscale: \"Viridis\",\n              },\n              marker: {\n                size: 3.5,\n                colorscale: \"Reds\",\n                cmin: -20,\n                cmax: 50,\n              },\n            },\n            {\n              // LEG 2\n              x: [0, this.leg_2[0][0], this.leg_2[1][0], this.leg_2[2][0]],\n              y: [0, this.leg_2[0][1], this.leg_2[1][1], this.leg_2[2][1]],\n              z: [0, this.leg_2[0][2], this.leg_2[1][2], this.leg_2[2][2]],\n              type: \"scatter3d\",\n              mode: \"lines+markers\",\n              line: {\n                width: 6,\n                colorscale: \"Viridis\",\n              },\n              marker: {\n                size: 3.5,\n                colorscale: \"Greens\",\n                cmin: -20,\n                cmax: 50,\n              },\n            },\n            {\n              // LEG 3\n              x: [0, this.leg_3[0][0], this.leg_3[1][0], this.leg_3[2][0]],\n              y: [0, this.leg_3[0][1], this.leg_3[1][1], this.leg_3[2][1]],\n              z: [0, this.leg_3[0][2], this.leg_3[1][2], this.leg_3[2][2]],\n              type: \"scatter3d\",\n              mode: \"lines+markers\",\n              line: {\n                width: 6,\n                colorscale: \"Viridis\",\n              },\n              marker: {\n                size: 3.5,\n                colorscale: \"Greens\",\n                cmin: -20,\n                cmax: 50,\n              },\n            },\n            {\n              // LEG 4\n              x: [0, this.leg_4[0][0], this.leg_4[1][0], this.leg_4[2][0]],\n              y: [0, this.leg_4[0][1], this.leg_4[1][1], this.leg_4[2][1]],\n              z: [0, this.leg_4[0][2], this.leg_4[1][2], this.leg_4[2][2]],\n              type: \"scatter3d\",\n              mode: \"lines+markers\",\n              line: {\n                width: 6,\n                colorscale: \"Viridis\",\n              },\n              marker: {\n                size: 3.5,\n                colorscale: \"Greens\",\n                cmin: -20,\n                cmax: 50,\n              },\n            },\n            {\n              // LEG 1 CG POINTS\n              x: this.state.showCogVectorTrace\n                ? [\n                    0,\n                    this.leg_1[0][0],\n                    0,\n                    this.leg_1[1][0],\n                    0,\n                    this.leg_1[2][0],\n                    0,\n                    this.leg_2[0][0],\n                    0,\n                    this.leg_2[1][0],\n                    0,\n                    this.leg_2[2][0],\n                    0,\n                    this.leg_3[0][0],\n                    0,\n                    this.leg_3[1][0],\n                    0,\n                    this.leg_3[2][0],\n                    0,\n                    this.leg_4[0][0],\n                    0,\n                    this.leg_4[1][0],\n                    0,\n                    this.leg_4[2][0],\n                  ]\n                : [],\n              y: this.state.showCogVectorTrace\n                ? [\n                    0,\n                    this.leg_1[0][1],\n                    0,\n                    this.leg_1[1][1],\n                    0,\n                    this.leg_1[2][1],\n                    0,\n                    this.leg_2[0][1],\n                    0,\n                    this.leg_2[1][1],\n                    0,\n                    this.leg_2[2][1],\n                    0,\n                    this.leg_3[0][1],\n                    0,\n                    this.leg_3[1][1],\n                    0,\n                    this.leg_3[2][1],\n                    0,\n                    this.leg_4[0][1],\n                    0,\n                    this.leg_4[1][1],\n                    0,\n                    this.leg_4[2][1],\n                  ]\n                : [],\n              z: this.state.showCogVectorTrace\n                ? [\n                    0,\n                    this.leg_1[0][2],\n                    0,\n                    this.leg_1[1][2],\n                    0,\n                    this.leg_1[2][2],\n                    0,\n                    this.leg_2[0][2],\n                    0,\n                    this.leg_2[1][2],\n                    0,\n                    this.leg_2[2][2],\n                    0,\n                    this.leg_3[0][2],\n                    0,\n                    this.leg_3[1][2],\n                    0,\n                    this.leg_3[2][2],\n                    0,\n                    this.leg_4[0][2],\n                    0,\n                    this.leg_4[1][2],\n                    0,\n                    this.leg_4[2][2],\n                  ]\n                : [],\n              type: \"scatter3d\",\n              mode: \"lines+markers\",\n              line: {\n                width: 3,\n                colorscale: \"Viridis\",\n              },\n              marker: {\n                size: 3.5,\n                colorscale: \"Reds\",\n                cmin: -20,\n                cmax: 50,\n              },\n            },\n            {\n              x: [\n                this.getCOMVector(this.leg_1, this.joint_1, 0),\n                this.getCOMVector(this.leg_2, this.joint_2, 0),\n                this.getCOMVector(this.leg_3, this.joint_3, 0),\n                this.getCOMVector(this.leg_4, this.joint_4, 0),\n              ],\n              y: [\n                this.getCOMVector(this.leg_1, this.joint_1, 1),\n                this.getCOMVector(this.leg_2, this.joint_2, 1),\n                this.getCOMVector(this.leg_3, this.joint_3, 1),\n                this.getCOMVector(this.leg_4, this.joint_4, 1),\n              ],\n              z: [\n                this.getCOMVector(this.leg_1, this.joint_1, 2),\n                this.getCOMVector(this.leg_2, this.joint_2, 2),\n                this.getCOMVector(this.leg_3, this.joint_3, 2),\n                this.getCOMVector(this.leg_4, this.joint_4, 2),\n              ],\n              mode: \"markers\",\n              type: \"scatter3d\",\n              marker: {\n                color: \"gba(255, 0, 0, 0.8)\",\n                size: 4,\n              },\n            },\n\n            {\n              x: this.props.showMesh ? this.getGeneratedMesh().x : [0],\n              y: this.props.showMesh ? this.getGeneratedMesh().y : [0],\n              z: this.props.showMesh ? this.getGeneratedMesh().z : [0],\n              color: \"rgb(300,100,200)\",\n              type: \"mesh3d\",\n              opacity: 0.3,\n            },\n          ]}\n          layout={{\n            autosize: false,\n            height: 999,\n            width: 1080,\n            scene: {\n              aspectmode: \"manual\",\n              aspectratio: {\n                x: 1,\n                y: 1,\n                z: 1,\n              },\n              xaxis: {\n                nticks: 9,\n                range: [-350, 350],\n              },\n              yaxis: {\n                nticks: 7,\n                range: [-350, 350],\n              },\n              zaxis: {\n                nticks: 10,\n                range: [-350, 350],\n              },\n            },\n\n            legend: {\n              bgcolor: \"#ffffff1c\",\n              orientation: \"h\",\n              font: {\n                color: \"black\",\n                family: \"Montserrat\",\n              },\n            },\n            title: {\n              text: \"Quadruped Simulation\",\n              font: {\n                family: \"Montserrat\",\n                size: 24,\n                color: \"black\",\n              },\n\n              xref: \"paper\",\n            },\n          }}\n          frames={[\n            {\n              // LEG 1\n              x: [0, this.leg_1[0][0], this.leg_1[1][0], this.leg_1[2][0]],\n              y: [0, this.leg_1[0][1], this.leg_1[1][1], this.leg_1[2][1]],\n              z: [0, this.leg_1[0][2], this.leg_1[1][2], this.leg_1[2][2]],\n              type: \"scatter3d\",\n              mode: \"lines+markers\",\n              line: {\n                width: 6,\n                colorscale: \"Viridis\",\n              },\n              marker: {\n                size: 3.5,\n                colorscale: \"Reds\",\n                cmin: -20,\n                cmax: 50,\n              },\n            },\n          ]}\n        />\n      </Container>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}